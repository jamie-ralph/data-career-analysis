---
title: An exploratory analysis of data scientists and analysts working in industry (with a bit of predictive modelling)
output:
    github_document:
        html_preview: true
---
<br>

```{r include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

```{r}
source("prepare_data.r")
```

In this project I'll be exploring the characteristics of data scientists and data analysts and attempt to build a model for predicting salary. The data comes from **StackOverflow's 2019 Developer Survey** which is a great resource for finding out about people who develop professionally or as a hobby. 
<br>

This project was inspired by Julia Silge's analysis of [gender and salary in the tech industry](https://juliasilge.com/blog/salary-gender/) which I highly recommend! 

#### Notes on data preparation

To fit a more accurate model of salary the data were filtered to:

* full-time workers 

* salaries between between \$30,000 and \$2,000,000 (salaries below this are unlikely to be full-time, salaries above are most likely threshold values; see the [survey methodology](https://insights.stackoverflow.com/survey/2019#methodology))

* individual contributors working in industry only (i.e. removing upper management and academics)

Respondents were labelled as data analysts if they identified as a "Data or business analyst" or a data scientist if identifying as "Data scientist or machine learning specialist". `r nrow(df_both_jobs)` respondents identified with both labels. These responses were removed to focus the analysis on the differences between the two groups. This left `r nrow(df_one_job)` responses, consisting of `r nrow(df_one_job[df_one_job$DevType == "Data scientist",])` data scientists and `r nrow(df_one_job[df_one_job$DevType == "Data analyst",])` data analysts. 

The salaries used here are the converted US Dollar salaries provided by StackOverflow. 

### Exploring the data

#### What do data scientists and data analysts earn? 

If we take a look at salaries overall, the range of salaries is similar between the groups with a large positive skew. 

```{r, fig.width=10}
source("plot_data.r")
box_plot_salary
```

The summary statistics show that the median salary for data scientists is slightly higher than for data analysts. 

```{r}
df_one_job %>%
    group_by(DevType) %>%
    summarise(`Median salary` = median(ConvertedComp),
              `Min salary`  = min(ConvertedComp),
              `Max salary` = max(ConvertedComp)) %>%
    knitr::kable()
```

<br>

#### How is gender identity represented in the responses?

<br>

The data shows that the majority of respondents indentified as men. It's possible
that women are under-represented in this sample, an issue that was identified for 
the survey overall. 

```{r}
df_one_job %>%
    mutate(Gender = case_when(
        str_detect(Gender, "Non-binary") ~ 
            "Non-binary/genderqueer/gender non-conforming",
        is.na(Gender) ~ "Not available",
        TRUE ~ Gender
    )) %>%
    tabyl(DevType, Gender) %>%
    adorn_percentages("row") %>%
    adorn_pct_formatting() %>%
    select(DevType, Man, Woman, `Non-binary/genderqueer/gender non-conforming`, `Not available`) %>%
    kableExtra::kable()

gender_plot_salary
```